// MinecraftUI Progress Components

@import '../core/mixins';
@import '../core/keyframes';
@import '../core/variables';

.mc-progress {
  position: relative;
  width: 100%;
  height: $mc-progress-height-md;
  background: $mc-surface-variant;
  border-radius: $mc-radius-full;
  overflow: hidden;
  margin: $mc-space-2 0;

  .mc-progress-bar {
    height: 100%;
    background: $mc-primary;
    border-radius: inherit;
    transition: width $mc-duration-medium2 $mc-easing-standard;
    position: relative;
    min-width: 0;

    // Animated shine effect
    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
                      90deg,
                      transparent,
                      rgba(255, 255, 255, 0.4),
                      transparent
      );
      animation: mcProgressShine 2s infinite;
    }
  }

  .mc-progress-label {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: $mc-label-small-size;
    font-weight: $mc-font-weight-medium;
    color: $mc-on-surface;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    z-index: 1;
    white-space: nowrap;
  }

  // Size variants
  &.mc-progress-sm {
    height: $mc-progress-height-sm;

    .mc-progress-label {
      font-size: $mc-label-small-size;
    }
  }

  &.mc-progress-lg {
    height: $mc-progress-height-lg;

    .mc-progress-label {
      font-size: $mc-label-medium-size;
    }
  }

  // Style variants
  &.mc-progress-determinate {
    .mc-progress-bar::after {
      display: none;
    }
  }

  &.mc-progress-indeterminate {
    .mc-progress-bar {
      width: 30% !important;
      animation: mcProgressIndeterminate 2s infinite;
    }
  }

  // Color variants (using new variables)
  &.mc-progress-success {
    .mc-progress-bar {
      background: $mc-success;
    }
  }

  &.mc-progress-warning {
    .mc-progress-bar {
      background: $mc-warning;
    }
  }

  &.mc-progress-error {
    .mc-progress-bar {
      background: $mc-error;
    }
  }

  &.mc-progress-info {
    .mc-progress-bar {
      background: $mc-info;
    }
  }
}

// Circular Progress
.mc-progress-circular {
  display: inline-block;
  width: 48px;
  height: 48px;
  position: relative;

  svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);

    circle {
      fill: none;
      stroke-width: 4;
      stroke-linecap: round;

      &.mc-progress-track {
        stroke: $mc-surface-variant;
      }

      &.mc-progress-indicator {
        stroke: $mc-primary;
        stroke-dasharray: 126; // 2π × 20 (radius)
        stroke-dashoffset: 126;
        transition: stroke-dashoffset $mc-duration-medium2 $mc-easing-standard;

        &.mc-progress-indeterminate {
          animation: mcCircularProgress 1.4s ease-in-out infinite;
        }
      }
    }
  }

  // Size variants
  &.mc-progress-circular-sm {
    width: 32px;
    height: 32px;
  }

  &.mc-progress-circular-lg {
    width: 64px;
    height: 64px;
  }
}